syntax = "proto3";

package proto;

import "retag.proto";
import "chart.proto";
import "registry.proto";
import "k8s.proto";

message InstallChartRequest {
    K8s k8s = 1;
    Chart chart = 2;
    // timeout specifies the max amount of time any caplet can run.
    int64 timeout = 3;
    // sync forces all node to pull image
    bool sync = 4;
    RegistryAuth registryAuth = 5;
}

message InstallChartResponse {
    string msg = 1;
}

message GenerateScriptRequest {
    Chart chart = 1;
    bool pull = 2;
    ReTag retag = 3;
    bool save = 4;
    bool load = 5;
    bool verbose = 6;
}

message GenerateScriptResponse {
    bytes msg = 1;
}

service Captain {
    rpc InstallChart (InstallChartRequest) returns (InstallChartResponse) {
    }
    rpc GenerateScript (GenerateScriptRequest) returns (stream GenerateScriptResponse) {
    }
}

